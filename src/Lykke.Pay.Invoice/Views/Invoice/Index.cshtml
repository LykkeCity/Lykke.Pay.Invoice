@using Lykke.Pay.Common
@model Lykke.Pay.Invoice.Models.InvoiceResult


@{
    ViewData["Title"] = "Invoices";
}
<link rel="stylesheet" href="/js/vendor/pieloader/jquery-pie-loader.css"></link>
<article class="content">
    <div class="container">
        <div class="invoice">
            <div class="invoice__top">
                <div class="invoice__title">Invoice #@Model.InvoiceNumber</div>
                <div class="invoice__subtitle">@Model.ClientName</div>
            </div>
            <div class="invoice__body">
                <div class="row">
                    @if (ViewBag.invoiceStatus.Equals(InvoiceStatus.Unpaid.ToString()))
                    {
                        <div class="col-xs-12 col-sm-5 col-md-6 state--pr0-sm">
                            <div class="invoice__qr">
                                <img src="@Model.QRCode" alt="">
                            </div>
                            <div class="invoice__row">
                                <div class="invoice__remain">
                                    <div class="invoice__remain-load ">
                                        <figure id="my-item" class="pie-loader"></figure>
                                        @*<div class="spinner_container">
                                                <div class="spinner"><div class="spinner__inside"></div></div>
                                            </div>*@
                                    </div>
                                    <span class="invoice__remain-text"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-7 col-md-6">
                            <div class="invoice__payment">
                                @Model.Amount BTC
                                <div class="invoice__info"> for payment </div>
                            </div>
                            <div class="invoice__original">
                                @Model.OrigAmount @Model.Currency
                                <div class="invoice__info"> original </div>
                            </div>
                            <div class="invoice__description">
                                <div class="invoice__label">Waiting for payment </div>
                                <div class="invoice__value"></div>
                            </div>
                        </div>
                    }
                    else if (ViewBag.invoiceStatus.Equals(InvoiceStatus.InProgress.ToString()))
                    {
                        <div class="col-xs-12 col-sm-7 col-md-6">
                            <div class="invoice__payment">
                                @Model.Amount BTC
                                <div class="invoice__info"> for payment </div>
                            </div>
                            <div class="invoice__original">
                                @Model.OrigAmount @Model.Currency
                                <div class="invoice__info"> original </div>
                            </div>
                            <div class="invoice__description">
                                <div class="invoice__label">Payment detected</div>
                                <div class="invoice__value"></div>
                            </div>
                        </div>
                    }
                    else if (ViewBag.invoiceStatus.Equals(InvoiceStatus.Paid.ToString()))
                    {
                        <div class="col-xs-12 col-sm-7 col-md-6">
                            <div class="invoice__payment">
                                @Model.Amount BTC
                                <div class="invoice__info"> for payment </div>
                            </div>
                            <div class="invoice__original">
                                @Model.OrigAmount @Model.Currency
                                <div class="invoice__info"> original </div>
                            </div>
                            <div class="invoice__description">
                                <div class="invoice__label">Succesful paied</div>
                                <div class="invoice__value"></div>
                            </div>
                        </div>
                    }
                    else if (ViewBag.invoiceStatus.Equals(InvoiceStatus.LatePaid.ToString()))
                    {
                        <div class="col-xs-12 col-sm-7 col-md-6">
                            <div class="invoice__payment">
                                @Model.Amount BTC
                                <div class="invoice__info"> for payment </div>
                            </div>
                            <div class="invoice__original">
                                @Model.OrigAmount @Model.Currency
                                <div class="invoice__info"> original </div>
                            </div>
                            <div class="invoice__description">
                                <div class="invoice__label">Error. The transfer was paied to late</div>
                                <div class="invoice__value"></div>
                            </div>
                        </div>
                    }
                    else if (ViewBag.invoiceStatus.Equals(InvoiceStatus.Overpaid.ToString()))
                    {
                        <div class="col-xs-12 col-sm-7 col-md-6">
                            <div class="invoice__payment">
                                @Model.Amount BTC
                                <div class="invoice__info"> for payment </div>
                            </div>
                            <div class="invoice__original">
                                @Model.OrigAmount @Model.Currency
                                <div class="invoice__info"> original </div>
                            </div>
                            <div class="invoice__description">
                                <div class="invoice__label">Error. The transfer was paied to much</div>
                                <div class="invoice__value"></div>
                            </div>
                        </div>
                    }
                    else if (ViewBag.invoiceStatus.Equals(InvoiceStatus.Underpaid.ToString()))
                    {
                        <div class="col-xs-12 col-sm-7 col-md-6">
                            <div class="invoice__payment">
                                @Model.Amount BTC
                                <div class="invoice__info"> for payment </div>
                            </div>
                            <div class="invoice__original">
                                @Model.OrigAmount @Model.Currency
                                <div class="invoice__info"> original </div>
                            </div>
                            <div class="invoice__description">
                                <div class="invoice__label">Error. The transfer was paied to small</div>
                                <div class="invoice__value"></div>
                            </div>
                        </div>
                    }

                </div>
            </div>
        </div>
    </div>
</article>


@section Scripts
    {
    <script type="text/javascript" src="/js/vendor/pieloader/jquery-pie-loader.js"></script>
    <script type="text/javascript">
        $('#my-item').svgPie({ duration: 2000, percentage: 42, dimension: 30 });

        $.invoiceTimeRefresh = '@ViewBag.invoiceTimeRefresh';
        $.invoiceTimeDueDate = '@ViewBag.invoiceTimeDueDate';
        $.walletAddress = '@ViewBag.address';
        $.invoiceId = '@ViewBag.invoiceId';
        $.updateOrderUrl = '@Url.Action("Regenerate")';
        $.updateStatusUrl = '@Url.Action("Status")';
        $.profilePageUrl = '@Url.Action("Profile", "Home")';
        $.invoiceStatus = '@ViewBag.invoiceStatus';
        $.needAutoUpdate = @ViewBag.needAutoUpdate;
    </script>
    <script src='/js/invoice.js' type="text/javascript"></script>
}
